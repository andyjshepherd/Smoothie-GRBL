<!-- ko if: settings.settings.webcam.webcamEnabled -->
<hr>
<div id="webcam_container_framing">
   <div id="webcam_rotator_framing" data-bind="css: { webcam_rotated: settings.webcam_rotate90(), webcam_unrotated: !settings.webcam_rotate90() }">
      <div class="webcam_fixed_ratio" data-bind="css: webcamFrameRatioClass">
         <div id="webcam_div" class="webcam_fixed_ratio_inner">
            <img id="webcam_image_framing" data-bind="click: function() { fsClick() }, css: { flipH: settings.webcam_flipH(), flipV: settings.webcam_flipV() }, event: { load: onWebcamFrameLoaded, error: onWebcamFrameErrored }">
         </div>
      </div>
   </div>
</div>
<hr>
<h5>&nbsp;Control</h5>
<!-- /ko -->

<div style="text-align: center; overflow: hidden" valign="top" align="center">
   <span style="display: inline-block; border: 1px solid; border-radius: 10px; margin: 0px 60px 20px 0px;" ">
      <table align="center" style="margin: 0 auto;">
        <tr>
           <td style="padding: 5px 10px 0px 5px;" align="right" valign="middle">Mode</td>
           <td style="padding: 5px 5px 0px 5px;" align="right" valign="middle" width="60px"><strong data-bind="text: mode()"></strong></td>
        </tr>
        <tr>
           <td style="padding: 3px 10px 0px 5px;" align="right" valign="middle">State</td>
           <td style="padding: 3px 5px 0px 5px;" align="right" valign="middle"><strong data-bind="text: state()"></strong></td>
        </tr>
        <tr>
           <td style="padding: 3px 10px 0px 5px;" align="right" valign="middle">X</td>
           <td style="padding: 3px 5px 0px 5px;" align="right" valign="middle"><strong data-bind="text: xPos()"></strong></td>
        </tr>
        <tr>
           <td style="padding: 3px 10px 0px 5px;" align="right" valign="middle">Y</td>
           <td style="padding: 3px 5px 0px 5px;" align="right" valign="middle"><strong data-bind="text: yPos()"></strong></td>
        </tr>
        <tr>
           <td style="padding: 3px 10px 0px 5px;" align="right" valign="middle">Z</td>
           <td style="padding: 3px 5px 0px 5px;" align="right" valign="middle"><strong data-bind="text: zPos()"></strong></td>
        </tr>
        <tr>
           <td style="padding: 3px 10px 0px 5px;" align="right" valign="middle">Power</td>
           <td style="padding: 3px 5px 0px 5px;" align="right" valign="middle"><strong data-bind="text: power()"></strong></td>
        </tr>
        <tr>
           <td style="padding: 3px 10px 5px 5px;" align="right" valign="middle">Speed</td>
           <td style="padding: 3px 5px 5px 5px;" align="right" valign="middle"><strong data-bind="text: speed()"></strong></td>
        </tr>
      </table>
   </span>

   <span style="display: inline-block; margin: 0px 60px 20px 0px;">
      <table class="jog-panel" id="jog_panel" border=0 style="margin: 0 auto;"">
         <tr>
            <td style="padding: 0px 55px 0px 0px;" align="center">
               <h5>Z</h5>
            </td>
            <td style="padding: 0px 0px 10px 0px;" >
               <button class="btn box" data-bind="enable: is_operational() && !is_printing() && state() == 'Idle', click: function() { sendCommand('origin') }">
               <i class="fa fa-crosshairs"></i>
               </button>
            </td>
            <td style="padding: 0px 0px 0px 10px;" align="center">
               <h5>X/Y</h5>
            </td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td style="padding: 0px 55px 10px 0px;" align="center">
               <button class="btn box" data-bind="enable: is_operational() && !is_printing() && (state() == 'Idle' || state() == 'Jog'), click: function() {moveHead('up')}">
               <i class="fa fa-arrow-up"></i>
               </button>
            </td>
            <td>&nbsp;</td>
            <td style="padding: 0px 10px 10px 10px;" align="center">
               <button class="btn box" data-bind="enable: is_operational() && !is_printing() && (state() == 'Idle' || state() == 'Jog'), click: function() {moveHead('forward')}">
               <i class="fa fa-arrow-up"></i>
               </button>
            </td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td style="padding: 0px 55px 10px 0px;" align="center">
               <button class="btn box" data-bind="enable: is_operational() && !is_printing() && state() == 'Idle', click: function() {moveHead('probez')}">
               <i class="fa fa-search-plus"></i>
               </button>
            </td>
            <td style="padding: 0px 0px 10px 0px;">
               <button class="btn box" data-bind="enable: is_operational() && !is_printing() && (state() == 'Idle' || state() == 'Jog'), click: function() {moveHead('left')}">
               <i class="fa fa-arrow-left"></i>
               </button>
            </td>
            <td style="padding: 0px 10px 10px 10px;" align="center">
               <button class="btn box" data-bind="enable: is_operational() && !is_printing() && state() == 'Idle', click: function() {moveHead('home')}">
               <i class="fa fa-home"></i>
               </button>
            </td>
            <td style="padding: 0px 20px 10px 0px;">
               <button class="btn box" data-bind="enable: is_operational() && !is_printing() && (state() == 'Idle' || state() == 'Jog'), click: function() {moveHead('right')}">
               <i class="fa fa-arrow-right"></i>
               </button>
            </td>
         </tr>
         <tr>
            <td style="padding: 0px 55px 20px 0px;" align="center">
               <button class="btn box" data-bind="enable: is_operational() && !is_printing() && (state() == 'Idle' || state() == 'Jog'), click: function() {moveHead('down')}">
               <i class="fa fa-arrow-down"></i>
               </button>
            </td>
            <td>&nbsp;</td>
            <td style="padding: 0px 10px 20px 10px;" align="center">
               <button class="btn box" data-bind="enable: is_operational() && !is_printing() && (state() == 'Idle' || state() == 'Jog'), click: function() {moveHead('backward')}">
               <i class="fa fa-arrow-down"></i>
               </button>
            </td>
            <td>&nbsp;</td>
         </tr>
         <tr>
            <td colspan=4 align="center" class="distance">
               <span align="center" class="btn-group" data-toggle="buttons-radio">
                  <!-- ko foreach: distances -->
                  <button type="button" class="btn distance" data-bind="click: function() { $root.distance($data) }, text: $data, css: { active: $root.distance() === $data }"></button>
                  <!-- /ko -->
               </span>
            </td>
         </tr>
      </table>
   </span>

   <span id="laser_buttons" valign="top" style="margin: 0px 0px 40px 0px; display: inline-block;" >
      <!-- ko if: settings.settings.plugins.bettergrblsupport.laserMode -->
        <button id="grblLaserButton" style="width: 130px" class="btn" data-bind="enable: is_operational() && !is_printing() && state() == 'Idle', click: function() { toggleWeak() }">Weak Laser</button>
        <br>
        <br>
      <!-- /ko -->
      <button style="width: 130px" class="btn" data-bind="enable: is_operational() && !is_printing() && (state() == 'Idle' || state() == 'Alarm'), click: function() { sendCommand('homing') }">Machine Home</button>
      <br>
      <br>
      <button style="width: 130px" class="btn" data-bind="enable: is_operational() && !is_printing(), click: function() { sendCommand('reset') }">Soft Reset</button>
      <br>
      <br>
      <button style="width: 130px" class="btn" data-bind="enable: is_operational() && !is_printing() && state() != 'Run' && state() != 'Sleep', click: function() { sendCommand('sleep') }">Sleep</button>
      <br>
      <br>
      <button style="width: 130px" class="btn" data-bind="enable: is_operational() && !is_printing() && state() == 'Alarm', click: function() { sendCommand('unlock') }">Unlock</button>
      <br>
   </span>
</div>

<hr>
<h5>&nbsp;Framing</h5>

<div style="text-align: center; overflow: hidden">
  <span style="padding: 0px 30px 10px 10px; display: inline-block;">
     <table width="200px" align="left" border=0>
        <tr>
           <td align="left" valign="middle">Length&nbsp;</td>
           <td valign="middle" style="padding: 0px 0px 0px 0px;">
              <input type="number" step="1.0"
                 class="input-mini text-right"
                 data-bind="value: length"
                 placeholder="100">mm
           </td>
        </tr>
        <tr>
           <td>&nbsp;</td>
        </tr>
        <tr>
           <td align="left" valign="middle">Width&nbsp;</td>
           <td valign="middle" style="padding: 0px 0px 0px 0px;">
              <input type="number" step="1.0"
                 class="input-mini text-right"
                 data-bind="value: width"
                 placeholder="100">mm
           </td>
        </tr>
     </table>
  </span>

  <span id="framingPanel" style="padding: 0px 30px 20px 30px; display: inline-block;">
     <table width="200px" border=0 cellpadding=0>
        <tr>
           <td align="center" valign="bottom" style="padding: 10px 0px 0px 0px;">
              <label>Starting Position</label>
           </td>
        </tr>
        <tr>
           <td align="center">
              <table border=0>
                 <tr>
                    <td>
                       <table border=0 align="center" id="radio_buttons">
                          <tr>
                             <td align="center" style="padding: 0px 5px 5px 5px;" valign="middle"><input id="grblTopLeft" name="frameOrigin" type="radio"/></td>
                             <td align="center" style="padding: 0px 10px 5px 10px;" valign="middle"><input id="grblTopCenter" name="frameOrigin" type="radio"/></td>
                             <td align="center" style="padding: 0px 5px 5px 5px;" valign="middle"><input id="grblTopRight" name="frameOrigin" type="radio"/></td>
                          </tr>
                          <tr>
                             <td align="center" style="padding: 5px 5px 5px 5px;" valign="middle"><input id="grblCenterLeft" name="frameOrigin" type="radio"/></td>
                             <td align="center" style="padding: 5px 10px 5px 10px;" valign="middle"><input id="grblCenter" name="frameOrigin" type="radio" checked/></td>
                             <td align="center" style="padding: 5px 5px 5px 5px;" valign="middle"><input id="grblCenterRight" name="frameOrigin" type="radio"/></td>
                          </tr>
                          <tr>
                             <td align="center" style="padding: 5px 5px 5px 5px;" valign="middle"><input id="grblBottomLeft" name="frameOrigin" type="radio"/></td>
                             <td align="center" style="padding: 5px 10px 5px 10px;" valign="middle"><input id="grblBottomCenter" name="frameOrigin" type="radio"/></td>
                             <td align="center" style="padding: 5px 5px 5px 5px;" valign="middle"><input id="grblBottomRight" name="frameOrigin" type="radio"/></td>
                          </tr>
                       </table>
                    </td>
                 </tr>
              </table>
           </td>
        </tr>
     </table>
  </span>

  <span id="frame_button" style="padding: 0px 20px 10px 30px; display: inline-block;" >
   <table width="130px" height="68px" border=0>
     <tr>
       <td valign="top" align="center">
         <button class="btn" style="width: 130px" data-bind="enable: is_operational() && !is_printing() && state() == 'Idle', click: function() { doFrame() }">Draw Frame</button>
       </td>
     </tr>
   </table>
  </span>
</div>
